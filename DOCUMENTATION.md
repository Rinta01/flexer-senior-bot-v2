# –§–ª–µ–∫—Å–µ—Ä —Å—Ç–∞—Ä—à–∏–π - Telegram –±–æ—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–µ–∂—É—Ä–Ω—ã–º–∏

![Python](https://img.shields.io/badge/Python-3.12+-blue)
![aiogram](https://img.shields.io/badge/aiogram-3.24+-green)
![License](https://img.shields.io/badge/License-MIT-yellow)
![Tests](https://img.shields.io/badge/Tests-27_passing-success)

> –£–º–Ω—ã–π Telegram-–±–æ—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–æ—Ç–∞—Ü–∏–µ–π "–¥–µ–∂—É—Ä–Ω—ã—Ö" –≤ –¥—Ä—É–∂–µ—Å–∫–∏—Ö –≥—Ä—É–ø–ø–∞—Ö.  
> –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –≤—ã–±–æ—Ä, —Å–∏—Å—Ç–µ–º–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—è–º–∏ –∏ –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π.

**–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 21 —è–Ω–≤–∞—Ä—è 2026  
**–í–µ—Ä—Å–∏—è:** 2.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Production Ready

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#-–æ—Å–Ω–æ–≤–Ω—ã–µ-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞](#-–∫–æ–º–∞–Ω–¥—ã-–±–æ—Ç–∞)
- [–°–∏—Å—Ç–µ–º–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π](#-—Å–∏—Å—Ç–µ–º–∞-–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π)
- [–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π](#-—Å–∏—Å—Ç–µ–º–∞-–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#Ô∏è-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- [–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞](#Ô∏è-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
- [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [Deployment](#-deployment)

---

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ë–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –¥–µ–∂—É—Ä–Ω—ã—Ö** - –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –≤—ã–±–æ—Ä —Å–ª—É—á–∞–π–Ω–æ–≥–æ –¥–µ–∂—É—Ä–Ω–æ–≥–æ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
- ‚úÖ **–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è** - –î–µ–∂—É—Ä–Ω—ã–π –¥–æ–ª–∂–µ–Ω –ø—Ä–∏–Ω—è—Ç—å –∏–ª–∏ –æ—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ inline-–∫–Ω–æ–ø–∫–∏
- ‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ—Ç–∞—Ü–∏–µ–π** - –ì–∞—Ä–∞–Ω—Ç–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π –≤ —Ç–µ–∫—É—â–µ–º —Ü–∏–∫–ª–µ
- ‚úÖ **–°—Ç–∞—Ç—É—Å—ã –¥–µ–∂—É—Ä–Ω—ã—Ö** - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è (PENDING, CONFIRMED, DECLINED, SKIPPED)
- ‚úÖ **–†—É—á–Ω–æ–π –≤—ã–±–æ—Ä** - –ö–æ–º–∞–Ω–¥–∞ `/force_pick` –¥–ª—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
- ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≥—Ä—É–ø–ø –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—è–º–∏** - –î–µ–∂—É—Ä–Ω—ã–π –º–æ–∂–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ –Ω–∞ –Ω–µ–¥–µ–ª—é
- ‚úÖ **–£–º–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - –û–±—ä—è–≤–ª–µ–Ω–∏–µ —Å —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ–º –∏ –∫–Ω–æ–ø–∫–∞–º–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- ‚úÖ **–î–∏–∞–ø–∞–∑–æ–Ω—ã –¥–∞—Ç** - –£–¥–æ–±–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ–¥–µ–ª—å ("13 —è–Ω–≤–∞—Ä—è - 19 —è–Ω–≤–∞—Ä—è")
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –¢–æ–ª—å–∫–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–π –¥–µ–∂—É—Ä–Ω—ã–π —Ç–µ–∫—É—â–µ–π –Ω–µ–¥–µ–ª–∏ –º–æ–∂–µ—Ç —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- ‚úÖ **–ü–∞—Ä—Å–∏–Ω–≥ –¥–∞—Ç –∏ –≤—Ä–µ–º–µ–Ω–∏** - –ì–∏–±–∫–∏–µ —Ñ–æ—Ä–º–∞—Ç—ã –≤–≤–æ–¥–∞ –¥–ª—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π
- ‚úÖ **–ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏** - 27+ unit –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.12+
- SQLite 3+ (—É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ macOS –∏ Linux)
- Telegram –±–æ—Ç —Ç–æ–∫–µ–Ω –æ—Ç [@BotFather](https://t.me/botfather)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

#### –í–∞—Ä–∏–∞–Ω—Ç 1: –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/Rinta01/flexer-senior-bot-v2.git
cd flexer-senior-bot-v2

# 2. –°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python3.12 -m venv venv
source venv/bin/activate  # Linux/Mac
# –∏–ª–∏
venv\Scripts\activate  # Windows

# 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -e ".[dev,db]"

# 4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å .env –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å BOT_TOKEN

# 5. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
python -m src.bot
```

#### –í–∞—Ä–∏–∞–Ω—Ç 2: Docker Compose (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Docker –∏ Docker Compose

# 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env
cp .env.example .env
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å BOT_TOKEN –≤ .env

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose up -d

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker-compose logs -f bot
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (.env)

```env
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
BOT_TOKEN=your_telegram_bot_token_from_botfather

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (SQLite –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
DATABASE_URL=sqlite+aiosqlite:///./flexer_senior.db

# –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≤—ã–±–æ—Ä–∞ –¥–µ–∂—É—Ä–Ω–æ–≥–æ
WEEKLY_DUTY_DAY=0      # 0=–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫, 6=–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ
WEEKLY_DUTY_HOUR=10    # –ß–∞—Å –≤ UTC
WEEKLY_DUTY_MINUTE=0   # –ú–∏–Ω—É—Ç–∞

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
LOG_LEVEL=INFO
ENVIRONMENT=production
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞ –≤ –≥—Ä—É–ø–ø—É

1. –°–æ–∑–¥–∞–π—Ç–µ –∏–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ Telegram –≥—Ä—É–ø–ø—É
2. –î–æ–±–∞–≤—å—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –≤ –≥—Ä—É–ø–ø—É (–Ω–∞–π–¥–∏—Ç–µ –ø–æ username)
3. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –î–∞–π—Ç–µ –±–æ—Ç—É –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

---

## üìñ –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞  | –û–ø–∏—Å–∞–Ω–∏–µ                               | –ì–¥–µ —Ä–∞–±–æ—Ç–∞–µ—Ç  |
| -------- | -------------------------------------- | ------------- |
| `/start` | –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –∫—Ä–∞—Ç–∫—É—é —Å–ø—Ä–∞–≤–∫—É | –í–µ–∑–¥–µ         |
| `/help`  | –ü–æ–ª–Ω–∞—è —Å–ø—Ä–∞–≤–∫–∞ –ø–æ –≤—Å–µ–º –∫–æ–º–∞–Ω–¥–∞–º        | –í–µ–∑–¥–µ         |
| `/join`  | –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –ø—É–ª—É –¥–µ–∂—É—Ä–Ω—ã—Ö         | –¢–æ–ª—å–∫–æ –≥—Ä—É–ø–ø—ã |
| `/leave` | –í—ã–π—Ç–∏ –∏–∑ –ø—É–ª–∞ –¥–µ–∂—É—Ä–Ω—ã—Ö                 | –¢–æ–ª—å–∫–æ –≥—Ä—É–ø–ø—ã |
| `/pool`  | –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø—É–ª–∞   | –¢–æ–ª—å–∫–æ –≥—Ä—É–ø–ø—ã |

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–µ–∂—É—Ä—Å—Ç–≤–∞–º–∏

| –ö–æ–º–∞–Ω–¥–∞       | –û–ø–∏—Å–∞–Ω–∏–µ                                        | –ö—Ç–æ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å |
| ------------- | ----------------------------------------------- | ---------------------- |
| `/activity`   | –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–µ–≥–æ –¥–µ–∂—É—Ä–Ω–æ–≥–æ –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–µ–¥–µ–ª–∏ | –í—Å–µ –≤ –≥—Ä—É–ø–ø–µ           |
| `/force_pick` | –í—Ä—É—á–Ω—É—é –≤—ã–±—Ä–∞—Ç—å –¥–µ–∂—É—Ä–Ω–æ–≥–æ (–≤ –æ–±—Ö–æ–¥ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è)  | –í—Å–µ –≤ –≥—Ä—É–ø–ø–µ           |

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—è–º–∏

| –ö–æ–º–∞–Ω–¥–∞                  | –û–ø–∏—Å–∞–Ω–∏–µ                         | –ö—Ç–æ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å                        |
| ------------------------ | -------------------------------- | --------------------------------------------- |
| `/set_activity <–¥–µ—Ç–∞–ª–∏>` | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ –Ω–∞ –Ω–µ–¥–µ–ª—é | –¢–æ–ª—å–∫–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–π –¥–µ–∂—É—Ä–Ω—ã–π —Ç–µ–∫—É—â–µ–π –Ω–µ–¥–µ–ª–∏ |

---

## üéØ –°–∏—Å—Ç–µ–º–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π

### –û–±–∑–æ—Ä

–î–µ–∂—É—Ä–Ω—ã–π –Ω–µ–¥–µ–ª–∏ –º–æ–∂–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ –¥–ª—è –≤—Å–µ–π –≥—Ä—É–ø–ø—ã. –°–∏—Å—Ç–µ–º–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —Ç–æ–ª—å–∫–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–π –¥–µ–∂—É—Ä–Ω—ã–π **—Ç–µ–∫—É—â–µ–π –Ω–µ–¥–µ–ª–∏** –º–æ–∂–µ—Ç —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å.

### –ö–æ–º–∞–Ω–¥–∞ `/set_activity`

**–§–æ—Ä–º–∞—Ç:**

```
/set_activity <–Ω–∞–∑–≤–∞–Ω–∏–µ> | <–æ–ø–∏—Å–∞–Ω–∏–µ> | <–¥–∞—Ç–∞> | <–≤—Ä–µ–º—è>
```

**–ü—Ä–∏–º–µ—Ä:**

```
/set_activity –ò–≥—Ä–∞ –≤ –º–∞—Ñ–∏—é | –ò–≥—Ä–∞–µ–º –≤ –∫–∞—Ñ–µ –ü—É—à–∫–∏–Ω | 15.01.2026 | 19:30
```

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:**

- **–î–∞—Ç–∞:** `15.01.2026`, `15.01`, `15-01-2026`, `15-01`
- **–í—Ä–µ–º—è:** `19:30`, `19-30`

**–ü—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:**

1. ‚úÖ –ö–æ–º–∞–Ω–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ –≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–∞—Ö
2. ‚úÖ –°—É—â–µ—Å—Ç–≤—É–µ—Ç –ø—É–ª –¥–µ–∂—É—Ä–Ω—ã—Ö –¥–ª—è –≥—Ä—É–ø–ø—ã
3. ‚úÖ –ï—Å—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–π –¥–µ–∂—É—Ä–Ω—ã–π –Ω–∞ —Ç–µ–∫—É—â—É—é –Ω–µ–¥–µ–ª—é
4. ‚úÖ **–û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –∫–æ–º–∞–Ω–¥—ã —è–≤–ª—è–µ—Ç—Å—è —ç—Ç–∏–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–º –¥–µ–∂—É—Ä–Ω—ã–º**
5. ‚úÖ –í—Å–µ –ø–æ–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### –ö–æ–º–∞–Ω–¥–∞ `/activity`

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ–∫—É—â–µ–º –¥–µ–∂—É—Ä–Ω–æ–º –∏ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.

**–ü—Ä–∏–º–µ—Ä—ã –≤—ã–≤–æ–¥–∞:**

#### ‚úÖ –° —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é (–¥–µ–∂—É—Ä–Ω—ã–π –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω)

```
üéØ –î–µ–∂—É—Ä–Ω—ã–π –Ω–µ–¥–µ–ª–∏

–ù–µ–¥–µ–ª—è: 13 —è–Ω–≤–∞—Ä—è - 19 —è–Ω–≤–∞—Ä—è
–î–µ–∂—É—Ä–Ω—ã–π: @username
–°—Ç–∞—Ç—É—Å: confirmed

üìÖ –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–µ–¥–µ–ª–∏:
–ù–∞–∑–≤–∞–Ω–∏–µ: –ò–≥—Ä–∞ –≤ –º–∞—Ñ–∏—é
–û–ø–∏—Å–∞–Ω–∏–µ: –ò–≥—Ä–∞–µ–º –≤ –∫–∞—Ñ–µ –ü—É—à–∫–∏–Ω
–ö–æ–≥–¥–∞: 15.01.2026 –≤ 19:30

–£–≤–∏–¥–∏–º—Å—è –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–∏! üéâ
```

#### ‚è≥ –ë–µ–∑ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (–¥–µ–∂—É—Ä–Ω—ã–π –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω)

```
üéØ –î–µ–∂—É—Ä–Ω—ã–π –Ω–µ–¥–µ–ª–∏

–ù–µ–¥–µ–ª—è: 13 —è–Ω–≤–∞—Ä—è - 19 —è–Ω–≤–∞—Ä—è
–î–µ–∂—É—Ä–Ω—ã–π: @username
–°—Ç–∞—Ç—É—Å: confirmed

‚ùì –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–∫–∞ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞.

üí° @username, –≤—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–∏:
/set_activity –ù–∞–∑–≤–∞–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –î–∞—Ç–∞ | –í—Ä–µ–º—è
```

#### üîÑ –î–µ–∂—É—Ä–Ω—ã–π –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω

```
üéØ –î–µ–∂—É—Ä–Ω—ã–π –Ω–µ–¥–µ–ª–∏

–ù–µ–¥–µ–ª—è: 13 —è–Ω–≤–∞—Ä—è - 19 —è–Ω–≤–∞—Ä—è
–î–µ–∂—É—Ä–Ω—ã–π: @username
–°—Ç–∞—Ç—É—Å: pending

‚ùì –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–∫–∞ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞.

‚è≥ –û–∂–∏–¥–∞–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—Ç –¥–µ–∂—É—Ä–Ω–æ–≥–æ.
```

---

## ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π

### –°—Ç–∞—Ç—É—Å—ã –¥–µ–∂—É—Ä—Å—Ç–≤–∞

| –°—Ç–∞—Ç—É—Å      | –û–ø–∏—Å–∞–Ω–∏–µ                                  |
| ----------- | ----------------------------------------- |
| `PENDING`   | –û–∂–∏–¥–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (–Ω–∞—á–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å)  |
| `CONFIRMED` | –î–µ–∂—É—Ä–Ω—ã–π –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ            |
| `DECLINED`  | –î–µ–∂—É—Ä–Ω—ã–π –æ—Ç–∫–∞–∑–∞–ª—Å—è (–ø–æ–∫–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è) |
| `SKIPPED`   | –î–µ–∂—É—Ä—Å—Ç–≤–æ –ø—Ä–æ–ø—É—â–µ–Ω–æ/–æ—Ç–º–µ–Ω–µ–Ω–æ              |

### –ü—Ä–æ—Ü–µ—Å—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

#### 1. –û–±—ä—è–≤–ª–µ–Ω–∏–µ –¥–µ–∂—É—Ä–Ω–æ–≥–æ

–ö–æ–≥–¥–∞ –±–æ—Ç –≤—ã–±–∏—Ä–∞–µ—Ç –¥–µ–∂—É—Ä–Ω–æ–≥–æ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–ª–∏ —á–µ—Ä–µ–∑ `/force_pick`):

```
üéØ –î–µ–∂—É—Ä–Ω—ã–π –Ω–∞ –Ω–µ–¥–µ–ª—é 13 —è–Ω–≤–∞—Ä—è - 19 —è–Ω–≤–∞—Ä—è

–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º, @username! üéâ

–¢—ã –≤—ã–±—Ä–∞–Ω –¥–µ–∂—É—Ä–Ω—ã–º –Ω–∞ —ç—Ç—É –Ω–µ–¥–µ–ª—é –∏ –æ—Ç–≤–µ—á–∞–µ—à—å –∑–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é
–º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –¥–ª—è –≥—Ä—É–ø–ø—ã.

–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥—Ç–≤–µ—Ä–¥–∏ –∏–ª–∏ –æ—Ç–∫–∞–∂–∏—Å—å:

[‚úÖ –ü—Ä–∏–Ω—è—Ç—å –¥–µ–∂—É—Ä—Å—Ç–≤–æ]  [‚ùå –û—Ç–∫–∞–∑–∞—Ç—å—Å—è]
```

#### 2. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ (‚úÖ –ü—Ä–∏–Ω—è—Ç—å)

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**

- –¢–æ–ª—å–∫–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –Ω–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É
- –î—Ä—É–≥–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

- –°—Ç–∞—Ç—É—Å –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ `CONFIRMED`
- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
- –î–µ–∂—É—Ä–Ω—ã–π –º–æ–∂–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ `/set_activity`

```
üéØ –î–µ–∂—É—Ä–Ω—ã–π –Ω–∞ –Ω–µ–¥–µ–ª—é 13 —è–Ω–≤–∞—Ä—è - 19 —è–Ω–≤–∞—Ä—è

@username –ø—Ä–∏–Ω—è–ª –¥–µ–∂—É—Ä—Å—Ç–≤–æ! ‚úÖ

–û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –Ω–∞ —ç—Ç—É –Ω–µ–¥–µ–ª—é.

–£–¥–∞—á–∏! üí™
```

#### 3. –û—Ç–∫–∞–∑ (‚ùå –û—Ç–∫–∞–∑–∞—Ç—å—Å—è)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

- –°—Ç–∞—Ç—É—Å –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ `SKIPPED`
- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
- –î–µ–∂—É—Ä—Å—Ç–≤–æ –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ –ø—Ä–æ–ø—É—â–µ–Ω–Ω–æ–µ

```
üéØ –î–µ–∂—É—Ä–Ω—ã–π –Ω–∞ –Ω–µ–¥–µ–ª—é 13 —è–Ω–≤–∞—Ä—è - 19 —è–Ω–≤–∞—Ä—è

@username –æ—Ç–∫–∞–∑–∞–ª—Å—è –æ—Ç –¥–µ–∂—É—Ä—Å—Ç–≤–∞ ‚ùå

–î–µ–∂—É—Ä—Å—Ç–≤–æ –±—É–¥–µ—Ç –ø—Ä–æ–ø—É—â–µ–Ω–æ.
```

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
flexer-senior-v2/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ bot.py                    # üöÄ –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ config.py                 # ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (env vars)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ handlers/                 # üì• –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ (aiogram routers)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ start.py              # /start - –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ help.py               # /help - —Å–ø—Ä–∞–≤–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ join.py               # /join - –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –ø—É–ª—É
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ leave.py              # /leave - –≤—ã—Ö–æ–¥ –∏–∑ –ø—É–ª–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pool.py               # /pool - —Å–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ activity.py           # /activity, /set_activity - –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ force_pick.py         # /force_pick - —Ä—É—á–Ω–æ–π –≤—ã–±–æ—Ä
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ duty_callbacks.py    # ‚úÖ‚ùå –û–±—Ä–∞–±–æ—Ç–∫–∞ inline-–∫–Ω–æ–ø–æ–∫
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ services/                 # üéØ –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ duty_manager.py       # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–µ–∂—É—Ä—Å—Ç–≤–∞–º–∏ –∏ —Ä–æ—Ç–∞—Ü–∏–µ–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ duty_selector.py      # –õ–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ –¥–µ–∂—É—Ä–Ω–æ–≥–æ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user_manager.py       # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—É–ª–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ notification.py       # –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ –≥—Ä—É–ø–ø—ã
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ database/                 # üóÑÔ∏è –°–ª–æ–π –¥–∞–Ω–Ω—ã—Ö (SQLAlchemy async)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ engine.py             # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ë–î, —Å–µ—Å—Å–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models.py             # ORM –º–æ–¥–µ–ª–∏ (User, Pool, Duty, etc.)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ repositories.py       # CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ (—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ middlewares/              # üîÄ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ middlewares
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logging.py            # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ utils/                    # üõ†Ô∏è –£—Ç–∏–ª–∏—Ç—ã
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îú‚îÄ‚îÄ logger.py             # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ       ‚îú‚îÄ‚îÄ validators.py         # –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ       ‚îî‚îÄ‚îÄ formatters.py         # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç –∏ —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ
‚îú‚îÄ‚îÄ tests/                        # üß™ –¢–µ—Å—Ç—ã (pytest)
‚îÇ   ‚îú‚îÄ‚îÄ conftest.py               # –§–∏–∫—Å—Ç—É—Ä—ã –¥–ª—è —Ç–µ—Å—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ unit/                     # Unit-—Ç–µ—Å—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ test_duty_manager.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ test_user_manager.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ test_repositories.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ test_activity_security.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ test_activity_command.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ test_validators.py
‚îÇ   ‚îî‚îÄ‚îÄ integration/              # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îÇ       ‚îî‚îÄ‚îÄ test_handlers.py
‚îÇ
‚îú‚îÄ‚îÄ migrations/                   # üì¶ –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î (–±—É–¥—É—â–µ–µ)
‚îú‚îÄ‚îÄ docker-compose.yml            # üê≥ Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ Dockerfile                    # üê≥ Docker –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ pyproject.toml                # üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
‚îú‚îÄ‚îÄ pytest.ini                    # üß™ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è pytest
‚îú‚îÄ‚îÄ .env.example                  # üìù –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ README.md                     # üìö –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

### –ü—Ä–∏–Ω—Ü–∏–ø—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

#### Clean Architecture

```
User Command ‚Üí Handlers ‚Üí Services ‚Üí Repositories ‚Üí Database
                ‚Üì
         (async/await)
                ‚Üì
         APScheduler (weekly jobs)
```

#### –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

- **Handlers** - –ø—Ä–∏–µ–º –∫–æ–º–∞–Ω–¥, –≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- **Services** - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞, –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è
- **Repositories** - CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ë–î
- **Models** - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö

### –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

#### TelegramUser

```python
- user_id (BigInteger, PK)        # Telegram user ID
- username (String, nullable)     # @username
- first_name (String)             # –ò–º—è
- last_name (String, nullable)    # –§–∞–º–∏–ª–∏—è
- is_active (Boolean)             # –ê–∫—Ç–∏–≤–µ–Ω –ª–∏
- created_at (DateTime)           # –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
```

#### DutyPool

```python
- id (Integer, PK, autoincrement)
- group_id (BigInteger, unique)   # Telegram chat ID
- title (String)                  # –ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã
- current_cycle (Integer)         # –¢–µ–∫—É—â–∏–π —Ü–∏–∫–ª —Ä–æ—Ç–∞—Ü–∏–∏
- is_active (Boolean)             # –ê–∫—Ç–∏–≤–µ–Ω –ª–∏ –ø—É–ª
- created_at (DateTime)
```

#### UserInPool

```python
- id (Integer, PK)
- user_id (BigInteger, FK)        # -> TelegramUser
- pool_id (Integer, FK)           # -> DutyPool
- has_completed_cycle (Boolean)   # –ó–∞–≤–µ—Ä—à–∏–ª –ª–∏ —Ç–µ–∫—É—â–∏–π —Ü–∏–∫–ª
- added_at (DateTime)
```

#### DutyAssignment

```python
- id (Integer, PK)
- user_id (BigInteger, FK)        # -> TelegramUser
- pool_id (Integer, FK)           # -> DutyPool
- week_number (Integer)           # ISO week (1-53)
- cycle_number (Integer)          # –ù–æ–º–µ—Ä —Ü–∏–∫–ª–∞
- assignment_date (DateTime)      # –ö–æ–≥–¥–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω
- status (Enum)                   # PENDING/CONFIRMED/DECLINED/SKIPPED
- notification_sent (Boolean)     # –ë—ã–ª–æ –ª–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

# –ü–æ–ª—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- activity_title (String)         # –ù–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
- activity_description (Text)     # –û–ø–∏—Å–∞–Ω–∏–µ
- activity_datetime (DateTime)    # –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
- activity_set_at (DateTime)      # –ö–æ–≥–¥–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
pytest

# –° –ø–æ–¥—Ä–æ–±–Ω—ã–º –≤—ã–≤–æ–¥–æ–º
pytest -v

# –¢–æ–ª—å–∫–æ unit-—Ç–µ—Å—Ç—ã
pytest tests/unit/

# –¢–æ–ª—å–∫–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ
pytest tests/integration/

# –° –æ—Ç—á—ë—Ç–æ–º –ø–æ–∫—Ä—ã—Ç–∏—è
pytest --cov=src --cov-report=html

# –û—Ç–∫—Ä—ã—Ç—å HTML –æ—Ç—á—ë—Ç
open htmlcov/index.html  # macOS
xdg-open htmlcov/index.html  # Linux
```

### –¢–µ–∫—É—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ

- **27 —Ç–µ—Å—Ç–æ–≤** (–≤—Å–µ –ø—Ä–æ—Ö–æ–¥—è—Ç ‚úÖ)
- **–ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞:** ~40%
- **Unit-—Ç–µ—Å—Ç—ã:** 24
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ:** 3

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

```
tests/
‚îú‚îÄ‚îÄ conftest.py                   # –û–±—â–∏–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã
‚îú‚îÄ‚îÄ unit/
‚îÇ   ‚îú‚îÄ‚îÄ test_duty_manager.py      # –õ–æ–≥–∏–∫–∞ –¥–µ–∂—É—Ä—Å—Ç–≤
‚îÇ   ‚îú‚îÄ‚îÄ test_user_manager.py      # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ test_repositories.py      # CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ test_validators.py        # –í–∞–ª–∏–¥–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ test_activity_security.py # –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ test_activity_command.py  # –ö–æ–º–∞–Ω–¥–∞ /activity
‚îî‚îÄ‚îÄ integration/
    ‚îî‚îÄ‚îÄ test_handlers.py          # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è handlers
```

---

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å
git clone https://github.com/Rinta01/flexer-senior-bot-v2.git
cd flexer-senior-bot-v2
python3.12 -m venv venv
source venv/bin/activate

# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
pip install -e ".[dev,db]"

# 3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env
cp .env.example .env
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å BOT_TOKEN

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
python -m src.bot

# 5. –ò–ª–∏ —Å –≥–æ—Ä—è—á–µ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π (watchdog)
pip install watchdog
watchmedo auto-restart -d src -p '*.py' -- python -m src.bot
```

### Workflow —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

#### 1. –°–æ–∑–¥–∞—Ç—å feature branch

```bash
git checkout -b feature/my-feature
# –∏–ª–∏
git checkout -b fix/bug-description
```

#### 2. –ù–∞–ø–∏—Å–∞—Ç—å –∫–æ–¥

–ü—Ä–∏–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ—Å—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤:

```python
# –ü—Ä–∏–º–µ—Ä: –Ω–æ–≤—ã–π handler
# src/handlers/my_handler.py

from aiogram import Router
from aiogram.filters import Command
from aiogram.types import Message

from src.utils.logger import setup_logging

logger = setup_logging(__name__)
router = Router()

@router.message(Command("mycommand"))
async def my_command_handler(message: Message) -> None:
    """Handle /mycommand."""
    await message.answer("Response")
    logger.info(f"Handled /mycommand from {message.from_user.id}")
```

#### 3. –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã

```python
# tests/unit/test_my_handler.py

import pytest
from unittest.mock import AsyncMock

@pytest.mark.asyncio
async def test_my_command():
    """Test my command handler."""
    # Arrange
    message = AsyncMock()
    message.from_user.id = 12345

    # Act
    await my_command_handler(message)

    # Assert
    message.answer.assert_called_once_with("Response")
```

#### 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã

```bash
pytest tests/unit/test_my_handler.py -v
```

#### 5. –ö–æ–º–º–∏—Ç –∏ push

```bash
git add .
git commit -m "feat: add my new feature"
git push origin feature/my-feature
```

### –°—Ç–∏–ª—å –∫–æ–¥–∞

- **Type hints** –≤–µ–∑–¥–µ
- **Docstrings** –¥–ª—è –≤—Å–µ—Ö –ø—É–±–ª–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- **Async/await** –¥–ª—è –≤—Å–µ—Ö IO –æ–ø–µ—Ä–∞—Ü–∏–π
- **f-strings** –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –°–ª–µ–¥–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º –ø—Ä–æ–µ–∫—Ç–∞

---

## üê≥ Deployment

### Docker Compose (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å .env
cp .env.example .env
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å BOT_TOKEN

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose up -d

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
docker-compose ps

# 4. –õ–æ–≥–∏
docker-compose logs -f bot

# 5. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
docker-compose down
```

### Systemd Service (Linux)

```bash
# 1. –°–æ–∑–¥–∞—Ç—å service —Ñ–∞–π–ª
sudo nano /etc/systemd/system/flexer-senior-bot.service
```

```ini
[Unit]
Description=Flexer Senior Telegram Bot
After=network.target

[Service]
Type=simple
User=your-user
WorkingDirectory=/path/to/flexer-senior-v2
Environment="PATH=/path/to/flexer-senior-v2/venv/bin"
ExecStart=/path/to/flexer-senior-v2/venv/bin/python -m src.bot
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

```bash
# 2. –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å
sudo systemctl daemon-reload
sudo systemctl enable flexer-senior-bot
sudo systemctl start flexer-senior-bot

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
sudo systemctl status flexer-senior-bot

# 4. –õ–æ–≥–∏
sudo journalctl -u flexer-senior-bot -f
```

---

## üîÑ –õ–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ –¥–µ–∂—É—Ä–Ω–æ–≥–æ

### –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–æ—Ç–∞—Ü–∏–∏

1. **–ü–æ–ª—É—á–∏—Ç—å –ø—É–ª –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** –¥–ª—è –≥—Ä—É–ø–ø—ã
2. **–§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å:** –≤—ã–±—Ä–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –≥–¥–µ `has_completed_cycle=False`
3. **–ï—Å–ª–∏ —Å–ø–∏—Å–æ–∫ –ø—É—Å—Ç:** —Å–±—Ä–æ—Å–∏—Ç—å `has_completed_cycle=False` –¥–ª—è –≤—Å–µ—Ö ‚Üí –Ω–æ–≤—ã–π —Ü–∏–∫–ª
4. **–°–ª—É—á–∞–π–Ω—ã–π –≤—ã–±–æ—Ä** –∏–∑ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞
5. **–ü–æ–º–µ—Ç–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ:** `has_completed_cycle=True`
6. **–°–æ–∑–¥–∞—Ç—å DutyAssignment** —Å —Å—Ç–∞—Ç—É—Å–æ–º `PENDING`
7. **–û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ** —Å inline-–∫–Ω–æ–ø–∫–∞–º–∏

### –ü—Ä–∏–º–µ—Ä: 3 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```
–¶–∏–∫–ª 1:  Alice (week 1) ‚Üí Bob (week 2) ‚Üí Charlie (week 3)
         [completed]      [completed]     [completed]
         ‚Üì –í—Å–µ –∑–∞–≤–µ—Ä—à–∏–ª–∏ —Ü–∏–∫–ª, —Å–±—Ä–æ—Å —Ñ–ª–∞–≥–æ–≤

–¶–∏–∫–ª 2:  Bob (week 4) ‚Üí Charlie (week 5) ‚Üí Alice (week 6)
         [completed]    [completed]       [completed]
```

### –ì–∞—Ä–∞–Ω—Ç–∏–∏

- ‚úÖ –ù–∏–∫—Ç–æ –Ω–µ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –æ–¥–Ω–æ–≥–æ —Ü–∏–∫–ª–∞
- ‚úÖ –†–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ–∂–¥—É —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±—Ä–æ—Å –∏ –Ω–∞—á–∞–ª–æ –Ω–æ–≤–æ–≥–æ —Ü–∏–∫–ª–∞
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π/–≤—ã—Ö–æ–¥–æ–≤

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

- **[DEVELOPMENT.md](DEVELOPMENT.md)** - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- **[AI_AGENT_GUIDE.md](AI_AGENT_GUIDE.md)** - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è AI-–∞–≥–µ–Ω—Ç–æ–≤

### –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

- **[IMPLEMENTATION_SUMMARY.md](IMPLEMENTATION_SUMMARY.md)** - –ò—Ç–æ–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ v1
- **[ACTIVITY_IMPLEMENTATION.md](ACTIVITY_IMPLEMENTATION.md)** - –°–∏—Å—Ç–µ–º–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π
- **[DUTY_CONFIRMATION.md](DUTY_CONFIRMATION.md)** - –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π

---

## ü§ù –ö–æ–Ω—Ç—Ä–∏–±—å—é—Ü–∏—è

–ú—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –≤–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞:

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch
3. –ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–¥ —Å —Ç–µ—Å—Ç–∞–º–∏
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
5. –°–æ–∑–¥–∞–π—Ç–µ Pull Request

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. [LICENSE](LICENSE)

---

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- [aiogram](https://aiogram.dev/) - –æ—Ç–ª–∏—á–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è Telegram –±–æ—Ç–æ–≤
- [SQLAlchemy](https://www.sqlalchemy.org/) - –º–æ—â–Ω—ã–π ORM
- [APScheduler](https://apscheduler.readthedocs.io/) - –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ [Issues](https://github.com/Rinta01/flexer-senior-bot-v2/issues)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π Issue —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º
3. –ò–ª–∏ —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –∞–≤—Ç–æ—Ä–æ–º

---

**–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–µ–∂—É—Ä–Ω—ã–º–∏ –≤ –¥—Ä—É–∂–µ—Å–∫–∏—Ö –≥—Ä—É–ø–ø–∞—Ö**
